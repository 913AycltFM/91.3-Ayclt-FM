var vh=Object.defineProperty;var gh=(v,y,E)=>y in v?vh(v,y,{enumerable:!0,configurable:!0,writable:!0,value:E}):v[y]=E;var r=(v,y,E)=>(gh(v,typeof y!="symbol"?y+"":y,E),E),Vs=(v,y,E)=>{if(!y.has(v))throw TypeError("Cannot "+E)};var c=(v,y,E)=>(Vs(v,y,"read from private field"),E?E.call(v):y.get(v)),i=(v,y,E)=>{if(y.has(v))throw TypeError("Cannot add the same private member more than once");y instanceof WeakSet?y.add(v):y.set(v,E)},u=(v,y,E,hs)=>(Vs(v,y,"write to private field"),hs?hs.call(v,E):y.set(v,E),E);var t=(v,y,E)=>(Vs(v,y,"access private method"),E);(function(v,y){typeof exports=="object"&&typeof module<"u"?module.exports=y():typeof define=="function"&&define.amd?define(y):(v=typeof globalThis<"u"?globalThis:v||self,v.Amplitude=y())})(this,function(){var ul,dl,Zs,Ne,Fs,rl,Gs,De,js,hl,ec,He,Os,ml,tc,pl,ic,Ve,Fe,fl,lc,yl,nc,q,oi,Oe,Be,vl,ac,gl,oc,N,si,El,sc,Al,cc,bl,kl,uc,xl,dc,Ll,rc,Il,hc,D,ci,Ye,Re,Sl,mc,Tl,pc,wl,fc,Ml,yc,$e,We,H,L,Cl,vc,_l,gc,Pl,Ec,Ql,Ac,zl,bc,Ul,kc,ql,xc,Nl,Lc,Dl,Ic,Hl,Sc,Je,Xe,Vl,Tc,Fl,wc,V,ui,jl,Mc,Ol,Cc,Bl,_c,Ge,et,Kl,Pc,Yl,Qc,F,di,Rl,zc,$l,Uc,Wl,qc,Jl,Nc,Xl,Dc,Zl,Hc,Gl,Vc,en,Fc,it,Bs,tn,jc,ln,Oc,nn,Bc,an,Kc,on,Yc,sn,Rc,cn,$c,un,Wc,dn,Jc,rn,Xc,lt,Ks,hn,Zc,nt,Ys,mn,Gc,pn,eu,fn,tu,yn,iu,vn,lu,gn,nu,En,au,I,An,ou,bn,su,kn,cu,xn,uu,S,Ln,du,In,ru,Sn,hu,Tn,mu,T,wn,pu,Mn,fu,Cn,yu,_n,vu,w,Pn,gu,Qn,Eu,zn,Au,Un,bu,at,ot,qn,ku,Nn,xu,j,ri,st,ct,Hn,Lu,Vn,Iu,O,hi,ut,dt,jn,Su,On,Tu,B,mi,rt,ht,Kn,wu,Yn,Mu,K,pi,$n,Cu,Wn,_u,Jn,Pu,Xn,Qu,Zn,zu,Gn,Uu,Y,fi,ea,qu,ta,Nu,ia,Du,la,Hu,na,Vu,aa,Fu,bs,Eh,oa,ju,mt,pt,sa,Ou,ca,Bu,R,yi,ft,yt,ua,Ku,da,Yu,$,vi,ra,Ru,ha,$u,vt,gt,ma,Wu,pa,Ju,W,gi,At,bt,fa,Xu,ya,Zu,J,Ei,xt,Lt,va,Gu,ga,ed,X,Ai,It,St,Ea,td,Aa,id,Z,bi,Tt,wt,ba,ld,ka,nd,G,ki,Mt,Ct,xa,ad,La,od,ee,xi,Ia,sd,Sa,cd,Ta,ud,wa,dd,_t,Pt,Ma,rd,Ca,hd,te,Li,Qt,zt,_a,md,Pa,pd,ie,Ii,Qa,fd,za,yd,Ut,qt,Ua,vd,qa,gd,le,Si,Na,Ed,Da,Ad,Ha,bd,Nt,Dt,Va,kd,Fa,xd,ne,Ti,ja,Ld,Oa,Id,Ba,Sd,Ka,Td,Ya,wd,Ra,Md,$a,Cd,Ht,Vt,Wa,_d,Ja,Pd,ae,wi,jt,Ot,Xa,Qd,Za,zd,oe,Mi,Bt,Kt,Ga,Ud,eo,qd,se,Ci,to,Nd,io,Dd,lo,no,Hd,ao,Vd,Yt,Rt,oo,Fd,so,jd,ce,_i,$t,Wt,uo,Od,ro,Bd,ue,Pi,ho,Kd,mo,Yd,Xt,Zt,po,Rd,fo,$d,de,Qi,yo,Wd,vo,Jd,go,Xd,Eo,Zd,Gt,ei,Ao,Gd,bo,er,re,zi,ko,tr,xo,ir,Lo,lr,Io,nr,So,ar,To,or,wo,sr,ti,ii,Mo,cr,Co,ur,he,Ui,Te,li,_o,dr,Po,rr,me,qi,we,ni,Qo,hr,zo,mr,pe,Ni,Uo,pr,qo,fr,No,yr,Do,vr,Ho,gr,Vo,Er,Fo,Ar,jo,br,Oo,kr,Bo,xr,Ko,Lr,Yo,Ir,Ro,Sr,$o,Tr,Wo,wr,Jo,Mr,Xo,Cr,Zo,_r,Go,Pr,es,Qr,ts,zr,is,C,Me,Hs,ls,Ur,ns,qr,ai,Rs,as,Nr,os,Dr,ss,Hr,cs,Vr,us,Fr,ds,jr;"use strict";const Or={name:"amplitudejs",version:"6.0.0",description:"A JavaScript library that allows you to control the design of your media controls in your webpage -- not the browser. No dependencies (jQuery not required) https://serversideup.net/open-source/amplitudejs",main:"dist/amplitude.js",devDependencies:{vite:"^3.0.0"},directories:{doc:"docs"},files:["dist"],funding:{type:"opencollective",url:"https://opencollective.com/amplitudejs"},scripts:{dev:"vite",build:"vite build",prettier:"npx pretty-quick",preversion:"npx pretty-quick && npm run test",postversion:"git push && git push --tags",test:"jest",version:"npm run build && git add -A dist"},repository:{type:"git",url:"git+https://github.com/521dimensions/amplitudejs.git"},keywords:["webaudio","html5","javascript","audio-player"],author:"521 Dimensions (https://521dimensions.com)",license:"MIT",bugs:{url:"https://github.com/521dimensions/amplitudejs/issues"},homepage:"https://github.com/521dimensions/amplitudejs#readme"},n={audio_element:new Audio,mobile:!1,version:Or,active_metadata:{},active_album:"",active_index:0,active_podcast:null,active_playlist:null,active_collection:null,playback_speed:1,repeat:!1,shuffle_list:{},repeat_audio:!1,shuffle_on:!1,callbacks:[],audio:[],collections:[],debug:!0,default_artwork:"",default_playlist_art:"",start_audio:"",starting_playlist:"",starting_playlist_song:"",starting_podcast:"",starting_podcast_episode:"",volume:{current:50,increment:5,decrement:5,pre_mute_level:50},soundcloud:{client:"",use_art:!1,audio_count:0,ready_count:0},is_touch_moving:!1,buffered:0,bindings:{},continue_next:!0,delay:0,player_state:"stopped",time_format:"MM:SS",web_audio_api:{availabile:!1,context:null,source:null,analyser:null},visualizations:{available:[],active:[],backup:""},waveforms:{sample_rate:100,built:[]}};class g{static writeMessage(e){n.debug&&console.log(e)}}class o{setIsMobile(){/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?n.mobile=!0:n.mobile=!1}static isIos(){return/iPhone|iPad|iPod/i.test(navigator.userAgent)}static isIE(){return window.navigator.userAgent.indexOf("MSIE ")>0||!!navigator.userAgent.match(/Trident.*rv\:11\./)}static isMobile(){return n.mobile}static isTouchMoving(){return n.is_touch_moving}static getAudioState(){return n.audio_element.paused?"paused":"playing"}static getScope(){return n.active_collection==""||n.active_collection==null?"audio":"collection"}static getVolume(){return n.volume.current}static getVolumeIncrement(){return n.volume.increment}static getVolumeDecrement(){return n.volume.decrement}static getPreMuteVolume(){return n.volume.pre_mute_level}static setPreMuteVolume(e=null){e||(e=n.volume.current),n.volume.pre_mute_level=e}static getPlaybackSpeed(){return n.playback_speed}static isCollectionShuffled(e){return!!(n.collections[e]&&n.collections[e].shuffled)}static setCollectionShuffled(e,l,a){n.collections[e].shuffled=l,n.collections[e].audio=a}static getCollectionAudio(e){return n.collections[e].audio}static getActiveCollection(){return n.active_collection}static getActiveAudioIndex(){return n.active_index}static getContinueNext(){return n.continue_next}static updateBufferedTime(){if(n.audio_element.buffered.length-1>=0){let e=n.audio_element.buffered.end(n.audio_element.buffered.length-1),l=n.audio_element.duration;n.buffered=e/l*100}}static getBufferedPercentage(){return parseFloat(n.buffered)/100}static isLive(){return n.active_metadata.live}static getTimeFormat(){return n.time_format}static getCallback(e){let l=!1;return n.callbacks.forEach(function(a){a.event==e&&(l=a)}),l}resetConfig(){n.audio_element=new Audio,n.active_metadata={},n.active_album="",n.active_index=0,n.active_playlist=null,n.playback_speed=1,n.audio=[],n.playlists={},n.start_audio="",n.starting_playlist="",n.starting_playlist_song="",n.repeat=!1,n.shuffle_list={},n.shuffle_on=!1,n.default_artwork="",n.default_playlist_art="",n.debug=!0,n.callbacks=[],n.volume={current:50,increment:5,decrement:5,pre_mute_level:50},n.soundcloud={client:"",use_art:!1,audio_count:0,ready_count:0},n.continue_next=!0}static setPlayerState(){n.audio_element.paused&&n.audio_element.currentTime==0&&(n.player_state="stopped"),n.audio_element.paused&&n.audio_element.currentTime>0&&(n.player_state="paused"),n.audio_element.paused||(n.player_state="playing")}}const ms=class{constructor(){i(this,ul,["abort","error","loadeddata","loadedmetadata","loadstart","pause","playing","play","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","canplay","canplaythrough","durationchange","ended"])}handleNativeAudioElementEvents(){c(this,ul).forEach(function(e){n.audio_element.addEventListener(e,function(){ms.run(e)})})}static run(e){let l=o.getCallback(e);if(l){g.writeMessage("Running Callback for event '"+l.event+"' with method '"+l.handler+"'");try{window[l.handler]()}catch(a){if(a.message=="CANCEL EVENT")throw a;g.writeMessage(a.message)}}}};let b=ms;ul=new WeakMap;class p{constructor(){i(this,dl);i(this,Ne);i(this,rl);i(this,De);i(this,hl);i(this,He);i(this,ml);i(this,pl)}play(){t(this,dl,Zs).call(this),t(this,rl,Gs).call(this),t(this,hl,ec).call(this),o.setPlayerState()}pause(){t(this,Ne,Fs).call(this),t(this,He,Os).call(this),t(this,De,js).call(this),o.setPlayerState()}stop(){t(this,Ne,Fs).call(this),this.setCurrentTime(0),t(this,He,Os).call(this),t(this,De,js).call(this),o.setPlayerState(),b.run("stop")}skipToLocation(e){n.active_metadata.live||n.audio_element.addEventListener("canplaythrough",function(){n.audio_element.duration>=e&&e>0?n.audio_element.currentTime=e:g.writeMessage("Amplitude can't skip to a location greater than the duration of the audio or less than 0.")},{once:!0})}setVolume(e){t(this,ml,tc).call(this,e),t(this,pl,ic).call(this,e)}setAudioLocation(e){n.active_metadata.live||(n.audio_element.currentTime=n.audio_element.duration*(e/100))}setPlaybackSpeed(e){n.playback_speed=e,n.audio_element.playbackRate=n.playback_speed}setCurrentTime(e){isFinite(e)&&(n.audio_element.currentTime=e)}}dl=new WeakSet,Zs=function(){},Ne=new WeakSet,Fs=function(){},rl=new WeakSet,Gs=function(){(n.active_metadata.live||o.isMobile()&&!n.paused)&&(n.audio_element.src=n.active_metadata.url,n.audio_element.load())},De=new WeakSet,js=function(){n.active_metadata.live&&(n.audio_element.src="",n.audio_element.load())},hl=new WeakSet,ec=function(){let e=n.audio_element.play();e!==void 0&&e.then(l=>{}).catch(l=>{}),n.audio_element.playbackRate=n.playback_speed},He=new WeakSet,Os=function(){n.audio_element.pause(),n.paused=!0},ml=new WeakSet,tc=function(e){e==0?n.audio_element.muted=!0:n.audio_element.muted=!1},pl=new WeakSet,ic=function(e){n.volume.current=e,n.audio_element.volume=e/100};const je=class{constructor(){i(this,fl);i(this,yl);i(this,q);i(this,Ve,void 0);i(this,Fe,void 0);u(this,Fe,o.isMobile())}initialize(){t(this,fl,lc).call(this),t(this,yl,nc).call(this)}static syncUI(){let e=o.getAudioState();document.querySelectorAll(je.globalPlayPauseQuery).forEach(a=>{e=="playing"?m.setElementPlay(a):m.setElementPause(a)})}static syncToPause(){document.querySelectorAll(je.globalPlayPauseQuery).forEach(l=>{m.setElementPause(l)})}};let ye=je;Ve=new WeakMap,Fe=new WeakMap,fl=new WeakSet,lc=function(){u(this,Ve,document.querySelectorAll(je.globalPlayPauseQuery))},yl=new WeakSet,nc=function(){c(this,Ve).forEach(e=>{c(this,Fe)?(e.removeEventListener("touchend",t(this,q,oi)),e.addEventListener("touchend",t(this,q,oi))):(e.removeEventListener("click",t(this,q,oi)),e.addEventListener("click",t(this,q,oi)))})},q=new WeakSet,oi=function(){if(!o.isTouchMoving()){let e=new p;n.audio_element.paused?e.play():e.pause(),m.syncAll()}},r(ye,"globalPlayPauseQuery",".amplitude-play-pause:not([data-amplitude-audio-index]):not([data-amplitude-collection-key])");class k{static collectionExists(e){return!!n.collections[e]}static collectionChanged(e){return n.active_collection!=e}static isCollectionShuffled(e){return!!n.collections[e].shuffle}}const Ke=class{constructor(){i(this,vl);i(this,gl);i(this,N);i(this,El);i(this,Al);i(this,Oe,void 0);i(this,Be,void 0);u(this,Be,o.isMobile())}initialize(){t(this,vl,ac).call(this),t(this,gl,oc).call(this)}static syncUI(){let e=o.getAudioState(),l=document.querySelectorAll(Ke.collectionPlayPauseQuery),a=o.getActiveCollection();l.forEach(s=>{let d=s.getAttribute("data-amplitude-collection-key");e=="playing"&&a==d?m.setElementPlay(s):m.setElementPause(s)})}static syncToPause(){document.querySelectorAll(Ke.collectionPlayPauseQuery).forEach(l=>{m.setElementPause(l)})}};let ve=Ke;Oe=new WeakMap,Be=new WeakMap,vl=new WeakSet,ac=function(){u(this,Oe,document.querySelectorAll(Ke.collectionPlayPauseQuery))},gl=new WeakSet,oc=function(){c(this,Oe).forEach(e=>{c(this,Be)?(e.removeEventListener("touchend",t(this,N,si)),e.addEventListener("touchend",t(this,N,si).bind(this,e))):(e.removeEventListener("click",t(this,N,si)),e.addEventListener("click",t(this,N,si).bind(this,e)))})},N=new WeakSet,si=function(e){if(!o.isTouchMoving()){let l=e.getAttribute("data-amplitude-collection-key");if(!k.collectionExists(l))return g.writeMessage('Collection with key "'+l+'" does not exist! Please define this collection in your configuration.'),!1;t(this,El,sc).call(this,l),t(this,Al,cc).call(this),m.syncAll()}},El=new WeakSet,sc=function(e){if(k.collectionChanged(e)){let l=new A;l.setActiveCollection(e),k.isCollectionShuffled(e)?l.changeAudioCollection(e,n.collections[e].shuffle_list[0],0,!0):l.changeAudioCollection(e,n.collections[e].audio[0],0)}},Al=new WeakSet,cc=function(){let e=new p;n.audio_element.paused?e.play():e.pause()},r(ve,"collectionPlayPauseQuery",".amplitude-play-pause[data-amplitude-collection-key]:not([data-amplitude-audio-index])");class ge{static audioExists(e){return!!n.audio[e]}static audioChanged(e,l=null){return n.active_collection!=l?!0:n.active_collection==null&&l==null?n.active_index!=e:n.active_collection==collection&&n.collections[l].active_index!=e}}const ke=class{constructor(){i(this,kl);i(this,xl);i(this,Ll);i(this,Il);i(this,D);i(this,bl,["cover_art_url","station_art_url","podcast_episode_cover_art_url","album_art_url"])}displayMetaData(){t(this,kl,uc).call(this),t(this,xl,dc).call(this)}displayCollectionMetaData(){}syncMetaData(){t(this,Ll,rc).call(this),t(this,Il,hc).call(this),this.displayCollectionMetaData()}};let x=ke;bl=new WeakMap,kl=new WeakSet,uc=function(){document.querySelectorAll(ke.globalMetaDataElementsQuery).forEach(l=>{let a=l.getAttribute("data-amplitude-audio-info"),s=n.active_metadata[a]!=null?n.active_metadata[a]:null;t(this,D,ci).call(this,a,s,l)})},xl=new WeakSet,dc=function(){document.querySelectorAll(ke.collectionMetaDataElementsQuery).forEach(l=>{let a=l.getAttribute("data-amplitude-audio-info"),s=n.active_metadata[a]!=null?n.active_metadata[a]:null;t(this,D,ci).call(this,a,s,l)})},Ll=new WeakSet,rc=function(){document.querySelectorAll(ke.audioMetaDataElementsQuery).forEach(l=>{let a=l.getAttribute("data-amplitude-audio-info"),s=l.getAttribute("data-amplitude-audio-index"),d=n.audio[s][a]!=null?n.audio[s][a]:null;t(this,D,ci).call(this,a,d,l)})},Il=new WeakSet,hc=function(){document.querySelectorAll(ke.collectionAudioMetaDataElementsQuery).forEach(l=>{let a=l.getAttribute("data-amplitude-audio-info"),s=l.getAttribute("data-amplitude-audio-index"),d=l.getAttribute("data-amplitude-collection-key"),f=n.collections[d].audio[s][info]!=null?n.collections[d].audio[s][info]:null;t(this,D,ci).call(this,a,f,l)})},D=new WeakSet,ci=function(e,l,a){c(this,bl).indexOf(e)>=0?(l=l||n.default_art,a.setAttribute("src",l)):(l=l||"",a.innerHTML=l)},r(x,"globalMetaDataElementsQuery","[data-amplitude-audio-info]:not([data-amplitude-audio-index]):not([data-amplitude-collection-key])"),r(x,"collectionMetaDataElementsQuery","[data-amplitude-audio-info][data-amplitude-collection-key]:not([data-amplitude-audio-index])"),r(x,"audioMetaDataElementsQuery","[data-amplitude-audio-info][data-amplitude-audio-index]:not([data-amplitude-collection-key])"),r(x,"collectionAudioMetaDataElementsQuery","[data-amplitude-audio-info][data-amplitude-audio-index][data-amplitude-collection-key]"),r(x,"collectionInfoElementsQuery","[data-amplitude-collection-info]");const ps=class{constructor(){i(this,Sl);i(this,Tl);i(this,wl);i(this,Ml);i(this,Ye,void 0);i(this,Re,void 0)}setActive(){o.getScope()=="audio"&&(t(this,Sl,mc).call(this),t(this,Tl,pc).call(this),t(this,wl,fc).call(this),t(this,Ml,yc).call(this))}};let Di=ps;Ye=new WeakMap,Re=new WeakMap,Sl=new WeakSet,mc=function(){u(this,Ye,document.querySelectorAll(ps.audioContainerElementQuery))},Tl=new WeakSet,pc=function(){c(this,Ye).forEach(function(e){e.classList.remove("amplitude-active-audio-container")})},wl=new WeakSet,fc=function(){u(this,Re,n.active_index)},Ml=new WeakSet,yc=function(){document.querySelectorAll('.amplitude-audio-container[data-amplitude-audio-index="'+c(this,Re)+'"]:not([data-amplitude-collection-key])').forEach(function(l){l.classList.add("amplitude-active-audio-container")})},r(Di,"audioContainerElementQuery",".amplitude-audio-container[data-amplitude-audio-index]:not([data-amplitude-collection-key])");const fs=class{constructor(e){i(this,Cl);i(this,_l);i(this,Pl);i(this,Ql);i(this,$e,void 0);i(this,We,void 0);i(this,H,void 0);i(this,L,void 0);u(this,$e,e)}setActive(){o.getScope()=="collection"&&(t(this,Cl,vc).call(this),t(this,_l,gc).call(this),t(this,Pl,Ec).call(this),t(this,Ql,Ac).call(this))}};let Hi=fs;$e=new WeakMap,We=new WeakMap,H=new WeakMap,L=new WeakMap,Cl=new WeakSet,vc=function(){u(this,We,document.querySelectorAll(fs.collectionAudioContainerElementQuery))},_l=new WeakSet,gc=function(){c(this,We).forEach(function(e){e.classList.remove("amplitude-active-audio-container")})},Pl=new WeakSet,Ec=function(){u(this,L,o.getActiveCollection()),c(this,$e)?u(this,H,n.collections[c(this,L)].active_index):o.isCollectionShuffled(c(this,L))?u(this,H,n.collections[c(this,L)].shuffle_list[n.collections[c(this,L)].active_index].index):u(this,H,n.collections[c(this,L)].active_index)},Ql=new WeakSet,Ac=function(){document.querySelectorAll('.amplitude-audio-container[data-amplitude-audio-index="'+c(this,H)+'"][data-amplitude-collection-key="'+c(this,L)+'"]').forEach(function(l){l.classList.add("amplitude-active-audio-container")})},r(Hi,"collectionAudioContainerElementQuery",".amplitude-audio-container[data-amplitude-audio-index][data-amplitude-collection-key]");class $s{constructor(){i(this,zl);i(this,Ul)}setActiveContainers(e){t(this,zl,bc).call(this),t(this,Ul,kc).call(this,e)}}zl=new WeakSet,bc=function(){new Di().setActive()},Ul=new WeakSet,kc=function(e){new Hi(e).setActive()};class Ee{constructor(){i(this,ql);i(this,Nl);i(this,Dl);i(this,Hl)}changeAudio(e,l,a=!1){t(this,ql,xc).call(this,e),t(this,Nl,Lc).call(this,e,l),t(this,Dl,Ic).call(this,a)}}ql=new WeakSet,xc=function(e){new p().stop(),m.syncAllToPause()},Nl=new WeakSet,Lc=function(e,l){n.active_collection=null,n.audio_element.src=e.url,n.active_metadata=e,n.active_index=parseInt(l)},Dl=new WeakSet,Ic=function(e){t(this,Hl,Sc).call(this),new $s().setActiveContainers(e),b.run("audio_change")},Hl=new WeakSet,Sc=function(){new x().displayMetaData()};const Ze=class{constructor(){i(this,Vl);i(this,Fl);i(this,V);i(this,jl);i(this,Ol);i(this,Bl);i(this,Je,void 0);i(this,Xe,void 0);u(this,Xe,o.isMobile())}initialize(){t(this,Vl,Tc).call(this),t(this,Fl,wc).call(this)}static syncUI(){let e=o.getAudioState(),l=document.querySelectorAll(Ze.audioPlayPauseQuery),a=o.getActiveAudioIndex();l.forEach(s=>{let d=s.getAttribute("data-amplitude-audio-index");e=="playing"&&a==d?m.setElementPlay(s):m.setElementPause(s)})}static syncToPause(){document.querySelectorAll(Ze.audioPlayPauseQuery).forEach(l=>{m.setElementPause(l)})}};let Ae=Ze;Je=new WeakMap,Xe=new WeakMap,Vl=new WeakSet,Tc=function(){u(this,Je,document.querySelectorAll(Ze.audioPlayPauseQuery))},Fl=new WeakSet,wc=function(){c(this,Je).forEach(e=>{c(this,Xe)?(e.removeEventListener("touchend",t(this,V,ui)),e.addEventListener("touchend",t(this,V,ui).bind(this,e))):(e.removeEventListener("click",t(this,V,ui)),e.addEventListener("click",t(this,V,ui).bind(this,e)))})},V=new WeakSet,ui=function(e){if(!o.isTouchMoving()){let l=e.getAttribute("data-amplitude-audio-index");if(!ge.audioExists(l))return g.writeMessage('Audio with index "'+l+'" does not exist! Please add an audio object at this index in your configuration.'),!1;t(this,jl,Mc).call(this,l),t(this,Ol,Cc).call(this,l),t(this,Bl,_c).call(this),m.syncAll()}},jl=new WeakSet,Mc=function(e){if(k.collectionChanged(null)){let l=new A,a=new Ee;l.setActiveCollection(null),a.changeAudio(n.audio[e],e,!0)}},Ol=new WeakSet,Cc=function(e){ge.audioChanged(e)&&new Ee().changeAudio(n.audio[e],e,!0)},Bl=new WeakSet,_c=function(){let e=new p;n.audio_element.paused?e.play():e.pause()},r(Ae,"audioPlayPauseQuery",".amplitude-play-pause[data-amplitude-audio-index]:not([data-amplitude-collection-key])");const tt=class{constructor(){i(this,Kl);i(this,Yl);i(this,F);i(this,Rl);i(this,$l);i(this,Wl);i(this,Ge,void 0);i(this,et,void 0);u(this,et,o.isMobile())}initialize(){t(this,Kl,Pc).call(this),t(this,Yl,Qc).call(this)}static syncUI(){let e=o.getAudioState();document.querySelectorAll(tt.collectionAudioPlayPauseQuery).forEach(a=>{e=="playing"?m.setElementPlay(a):m.setElementPause(a)})}static syncToPause(){document.querySelectorAll(tt.collectionAudioPlayPauseQuery).forEach(l=>{m.setElementPause(l)})}};let be=tt;Ge=new WeakMap,et=new WeakMap,Kl=new WeakSet,Pc=function(){u(this,Ge,document.querySelectorAll(tt.collectionAudioPlayPauseQuery))},Yl=new WeakSet,Qc=function(){c(this,Ge).forEach(e=>{c(this,et)?(e.removeEventListener("touchend",t(this,F,di)),e.addEventListener("touchend",t(this,F,di).bind(this,e))):(e.removeEventListener("click",t(this,F,di)),e.addEventListener("click",t(this,F,di).bind(this,e)))})},F=new WeakSet,di=function(e){if(!o.isTouchMoving()){let l=e.getAttribute("data-amplitude-collection-key"),a=e.getAttribute("data-amplitude-audio-index");t(this,Rl,zc).call(this,l,a),t(this,$l,Uc).call(this,l,a),t(this,Wl,qc).call(this),m.syncAll()}},Rl=new WeakSet,zc=function(e,l){if(k.collectionChanged(e)){let a=new A;a.setActiveCollection(e),a.changeAudioCollection(e,n.collections[e].audio[l],l,!0)}},$l=new WeakSet,Uc=function(e,l){ge.audioChanged(l,e)&&new A().changeAudioCollection(e,n.collections[e].audio[l],l,!0)},Wl=new WeakSet,qc=function(){let e=new p;n.audio_element.paused?e.play():e.pause()},r(be,"collectionAudioPlayPauseQuery",".amplitude-play-pause[data-amplitude-audio-index][data-amplitude-collection-key]");class m{constructor(){i(this,Jl);i(this,Xl);i(this,Zl);i(this,Gl)}setUp(){t(this,Jl,Nc).call(this),t(this,Xl,Dc).call(this),t(this,Zl,Hc).call(this),t(this,Gl,Vc).call(this)}static syncAll(){ye.syncUI(),ve.syncUI(),Ae.syncUI(),be.syncUI()}static syncAllToPause(){ye.syncToPause(),ve.syncToPause(),Ae.syncToPause(),be.syncToPause()}static setElementPlay(e){e.classList.add("amplitude-playing"),e.classList.remove("amplitude-paused")}static setElementPause(e){e.classList.remove("amplitude-playing"),e.classList.add("amplitude-paused")}}Jl=new WeakSet,Nc=function(){new ye().initialize()},Xl=new WeakSet,Dc=function(){new ve().initialize()},Zl=new WeakSet,Hc=function(){new Ae().initialize()},Gl=new WeakSet,Vc=function(){new be().initialize()};class A{constructor(){i(this,en);i(this,it);i(this,tn);i(this,ln);i(this,nn);i(this,an);i(this,on);i(this,sn);i(this,cn);i(this,un);i(this,dn);i(this,rn)}next(e=null,l=!1){e||(e=n.active_collection);let a=t(this,en,Fc).call(this,e);this.setActiveCollection(e),this.changeCollectionAudio(e,a.audio,a.index),t(this,nn,Bc).call(this,a.end,l),m.syncAll(),b.run("next"),n.repeat_audio&&b.run("audio_repeated")}previous(e=null){e||(e=n.active_collection);let l=t(this,an,Kc).call(this,e);this.setActiveCollection(e),this.changeCollectionAudio(e,l.audio,l.index),new p().play(),m.syncAll(),b.run("previous"),n.repeat_audio&&b.run("audio_repeated")}setActiveCollection(e){n.active_collection!=e&&(b.run("collection_changed"),n.active_collection=e,e!=null&&(n.collections[e].active_index=0))}changeAudioCollection(e,l,a,s){t(this,cn,$c).call(this,l),t(this,un,Wc).call(this,e,l,a),t(this,dn,Jc).call(this,s)}}en=new WeakSet,Fc=function(e){return n.repeat_audio?t(this,it,Bs).call(this,e):n.collections[e].shuffle?t(this,tn,jc).call(this,e):t(this,ln,Oc).call(this,e)},it=new WeakSet,Bs=function(e){let l=n.collections[e].active_index;return{index:nextIndex,audio:n.collections[e].shuffle?n.collections[e].shuffle_list[l]:n.collections[e].audio[l],end:!1}},tn=new WeakSet,jc=function(e){let l=null,a=!1,s=n.collections[e].active_index,d=n.collections[e].shuffle_list.length;return parseInt(s+1)<d?l=parseInt(s+1):(l=0,a=!0),{index:l,audio:n.collections[e].shuffleList[l],end:a}},ln=new WeakSet,Oc=function(e){let l=null,a=!1,s=n.collections[e].active_index,d=n.collections[e].audio.length;return parseInt(s+1)<d?l=parseInt(s+1):(l=0,a=!0),{index:l,audio:n.collections[e].audio[l],end:a}},nn=new WeakSet,Bc=function(e,l){e&&!n.repeat_audio||l&&!n.repeat_audio&&e||new p().play()},an=new WeakSet,Kc=function(){return n.repeat_audio?t(this,it,Bs).call(this,collectionKey):n.collections[collectionKey].shuffle?t(this,on,Yc).call(this,collectionKey):t(this,sn,Rc).call(this,collectionKey)},on=new WeakSet,Yc=function(e){let l=null,a=n.collections[e].active_index,s=n.collections[e].shuffle_list.length;return parseInt(a-1)>=0?l=parseInt(a-1):l=parseInt(s-1),{index:l,audio:n.collections[e].shuffleList[l]}},sn=new WeakSet,Rc=function(e){let l=null,a=n.collections[e].active_index,s=n.collections[e].audio.length;return parseInt(a-1)>=0?l=parseInt(a-1):l=parseInt(s-1),{index:l,audio:n.collections[e].audio[l]}},cn=new WeakSet,$c=function(e){p.stop(),m.syncAllToPause()},un=new WeakSet,Wc=function(e,l,a){n.audio_element=l.url,n.active_metadata=l,n.active_index=null,n.collections[e].active_index=parseInt(a)},dn=new WeakSet,Jc=function(e){t(this,rn,Xc).call(this),new $s().setActiveContainers(e),b.run("audio_change")},rn=new WeakSet,Xc=function(){new x().displayMetaData()};class Br{constructor(){i(this,lt)}bind(){n.audio_element.removeEventListener("ended",t(this,lt,Ks)),n.audio_element.addEventListener("ended",t(this,lt,Ks).bind(this))}}lt=new WeakSet,Ks=function(){setTimeout(function(){o.getScope()=="collection"&&o.getContinueNext()?new A().next(o.getActiveCollection(),!0):(new p().stop(),m.syncAll())},n.delay)};class Kr{constructor(){i(this,hn);i(this,nt);i(this,mn)}bind(){t(this,hn,Zc).call(this)}}hn=new WeakSet,Zc=function(){document.removeEventListener("keydown",t(this,nt,Ys).bind(this)),document.addEventListener("keydown",t(this,nt,Ys).bind(this))},nt=new WeakSet,Ys=function(e){t(this,mn,Gc).call(this)||e.key},mn=new WeakSet,Gc=function(){let e=document.activeElement.tagName.toLowerCase();return["input","textarea","select","checkbox"].indexOf(e)>-1};const ys=class{static syncUI(){document.querySelectorAll(ys.globalBufferedProgressQuery).forEach(function(l){isNaN(n.buffered)||(l.value=parseFloat(o.getBufferedPercentage()))})}};let Vi=ys;r(Vi,"globalBufferedProgressQuery","progress.amplitude-buffered-progress:not([data-amplitude-audio-index]):not([data-amplitude-collection-key])");class Yr{static syncUI(){let e=o.getActiveCollection();document.querySelectorAll('progress.amplitude-buffered-progress[data-amplitude-collection-key="'+e+'"]:not([data-amplitude-audio-index])').forEach(function(a){isNaN(n.buffered)||(a.value=parseFloat(o.getBufferedPercentage()))})}}class Ws{static syncUI(){let e=o.getActiveAudioIndex();document.querySelectorAll('progress.amplitude-buffered-progress[data-amplitude-audio-index="'+e+'"]:not([data-amplitude-collection-key])').forEach(function(a){isNaN(n.buffered)||(a.value=parseFloat(o.getBufferedPercentage()))})}}r(Ws,"audioBufferedProgressQuery","progress.amplitude-buffered-progress[data-amplitude-audio-index]:not([data-amplitude-collection-key])");class Rr{static syncAll(){Vi.syncUI(),Yr.syncUI(),Ws.syncUI()}}const vs=class{static syncUI(e){!isNaN(e)&&isFinite(e)&&document.querySelectorAll(vs.globalProgressQuery).forEach(a=>{let s=a.max;a.value=e/100*s})}};let Fi=vs;r(Fi,"globalProgressQuery","progress.amplitude-audio-played-progress:not([data-amplitude-audio-index]):not([data-amplitude-collection-key])");const gs=class{static syncUI(e){if(!isNaN(e)&&isFinite(e)){let l=document.querySelectorAll(gs.collectionProgressQuery),a=o.getActiveCollection();l.forEach(s=>{let d=s.getAttribute("data-amplitude-collection-key"),f=s.max;a==d?s.value=e/100*f:s.value=0})}}};let ji=gs;r(ji,"collectionProgressQuery","progress.amplitude-audio-played-progress[data-amplitude-collection-key]:not([data-amplitude-audio-index])");const Es=class{static syncUI(e){if(!isNaN(e)&&isFinite(e)){let l=document.querySelectorAll(Es.audioProgressQuery),a=o.getActiveAudioIndex();l.forEach(s=>{let d=s.getAttribute("data-amplitude-audio-index"),f=s.max;a==d?s.value=e/100*f:s.value=0})}}};let Oi=Es;r(Oi,"audioProgressQuery","progress.amplitude-audio-played-progress[data-amplitude-audio-index]:not([data-amplitude-collection-key])");const As=class{static syncUI(e){if(!isNaN(e)&&isFinite(e)){let l=document.querySelectorAll(As.collectionAudioProgressQuery),a=o.getActiveCollection(),s=o.getActiveAudioIndex();l.forEach(d=>{let f=d.getAttribute("data-amplitude-collection-key"),fe=d.getAttribute("data-amplitude-audio-index"),rs=d.max;a==f&&s==fe?d.value=e/100*rs:d.value=0})}}};let Bi=As;r(Bi,"collectionAudioProgressQuery","progress.amplitude-audio-played-progress[data-amplitude-collection-key][data-amplitude-audio-index]");class $r{constructor(){}static syncCurrentTime(e){Fi.syncUI(e),ji.syncUI(e),Oi.syncUI(e),Bi.syncUI(e)}}class Ce{constructor(){i(this,pn);i(this,fn);i(this,yn);i(this,vn);i(this,gn);i(this,En)}static percentageInSeconds(e){return n.audio_element.duration*(e/100)}computeCurrentTimes(){let e={};return e.seconds=t(this,pn,eu).call(this),e.minutes=t(this,fn,tu).call(this),e.hours=t(this,yn,iu).call(this),e}computeAudioCompletionPercentage(){return n.audio_element.currentTime/n.audio_element.duration*100}computeAudioDuration(){let e={};return e.seconds=t(this,vn,lu).call(this),e.minutes=t(this,gn,nu).call(this),e.hours=t(this,En,au).call(this),e}}pn=new WeakSet,eu=function(){return(Math.floor(n.audio_element.currentTime%60)<10?"0":"")+Math.floor(n.audio_element.currentTime%60)},fn=new WeakSet,tu=function(){let e=Math.floor(n.audio_element.currentTime/60);return e<10&&(e="0"+e),e},yn=new WeakSet,iu=function(){let e=Math.floor(n.audio_element.currentTime/3600);return e<10&&(e="0"+e),e},vn=new WeakSet,lu=function(){return(Math.floor(n.audio_element.duration%60)<10?"0":"")+Math.floor(n.audio_element.duration%60)},gn=new WeakSet,nu=function(){let e=Math.floor(n.audio_element.duration/60);return e<10&&(e="0"+e),e},En=new WeakSet,au=function(){let e=Math.floor(n.audio_element.duration/3600);return e<10&&(e="0"+e),e};const xe=class{constructor(e){i(this,An);i(this,bn);i(this,kn);i(this,xn);i(this,I,void 0);u(this,I,e)}sync(){t(this,An,ou).call(this),t(this,bn,su).call(this),t(this,kn,cu).call(this),t(this,xn,uu).call(this)}};let _=xe;I=new WeakMap,An=new WeakSet,ou=function(){let e=o.getTimeFormat(),l=document.querySelectorAll(xe.globalFormattedTimeElementQuery),a=e.replace("HH",c(this,I).hours).replace("MM",c(this,I).minutes).replace("SS",c(this,I).seconds);l.forEach(s=>{s.innerHTML=a})},bn=new WeakSet,su=function(){document.querySelectorAll(xe.globalHoursTimeElementQuery).forEach(l=>{l.innerHTML=c(this,I).hours})},kn=new WeakSet,cu=function(){document.querySelectorAll(xe.globalMinutesTimeElementQuery).forEach(l=>{l.innerHTML=c(this,I).minutes})},xn=new WeakSet,uu=function(){document.querySelectorAll(xe.globalSecondsTimeElementQuery).forEach(l=>{l.innerHTML=c(this,I).seconds})},r(_,"globalFormattedTimeElementQuery",".amplitude-current-time:not([data-amplitude-audio-index]):not([data-amplitude-collection-key])"),r(_,"globalHoursTimeElementQuery",".amplitude-current-hours:not([data-amplitude-audio-index]):not([data-amplitude-collection-key])"),r(_,"globalMinutesTimeElementQuery",".amplitude-current-minutes:not([data-amplitude-audio-index]):not([data-amplitude-collection-key])"),r(_,"globalSecondsTimeElementQuery",".amplitude-current-seconds:not([data-amplitude-audio-index]):not([data-amplitude-collection-key])");const Le=class{constructor(e){i(this,Ln);i(this,In);i(this,Sn);i(this,Tn);i(this,S,void 0);u(this,S,e)}sync(){t(this,Ln,du).call(this),t(this,In,ru).call(this),t(this,Sn,hu).call(this),t(this,Tn,mu).call(this)}};let P=Le;S=new WeakMap,Ln=new WeakSet,du=function(){let e=o.getTimeFormat(),l=o.getActiveCollection(),a=document.querySelectorAll(Le.collectionFormattedTimeElementQuery),s=e.replace("HH",c(this,S).hours).replace("MM",c(this,S).minutes).replace("SS",c(this,S).seconds);a.forEach(d=>{let f=d.getAttribute("data-amplitude-collection-key");l==f?d.innerHTML=s:d.innerHTML="00:00"})},In=new WeakSet,ru=function(){let e=document.querySelectorAll(Le.collectionHoursTimeElementQuery),l=o.getActiveCollection();e.forEach(a=>{let s=a.getAttribute("data-amplitude-collection-key");l==s?a.innerHTML=c(this,S).hours:a.innerHTML="00"})},Sn=new WeakSet,hu=function(){let e=document.querySelectorAll(Le.collectionMinutesTimeElementQuery),l=o.getActiveCollection();e.forEach(a=>{let s=a.getAttribute("data-amplitude-collection-key");l==s?a.innerHTML=c(this,S).minutes:a.innerHTML="00"})},Tn=new WeakSet,mu=function(){let e=document.querySelectorAll(Le.collectionSecondsTimeElementQuery),l=o.getActiveCollection();e.forEach(a=>{let s=a.getAttribute("data-amplitude-collection-key");l==s?a.innerHTML=c(this,S).seconds:a.innerHTML="00"})},r(P,"collectionFormattedTimeElementQuery",".amplitude-current-time[data-amplitude-collection-key]:not([data-amplitude-audio-index])"),r(P,"collectionHoursTimeElementQuery",".amplitude-current-hours[data-amplitude-collection-key]:not([data-amplitude-audio-index])"),r(P,"collectionMinutesTimeElementQuery",".amplitude-current-minutes[data-amplitude-collection-key]:not([data-amplitude-audio-index])"),r(P,"collectionSecondsTimeElementQuery",".amplitude-current-seconds[data-amplitude-collection-key]:not([data-amplitude-audio-index])");const Ie=class{constructor(e){i(this,wn);i(this,Mn);i(this,Cn);i(this,_n);i(this,T,void 0);u(this,T,e)}sync(){t(this,wn,pu).call(this),t(this,Mn,fu).call(this),t(this,Cn,yu).call(this),t(this,_n,vu).call(this)}};let Q=Ie;T=new WeakMap,wn=new WeakSet,pu=function(){let e=o.getTimeFormat(),l=o.getActiveAudioIndex(),a=document.querySelectorAll(Ie.audioFormattedTimeElementQuery),s=e.replace("HH",c(this,T).hours).replace("MM",c(this,T).minutes).replace("SS",c(this,T).seconds);a.forEach(d=>{let f=d.getAttribute("data-amplitude-audio-index");l==f?d.innerHTML=s:d.innerHTML="00:00"})},Mn=new WeakSet,fu=function(){let e=document.querySelectorAll(Ie.audioHoursTimeElementQuery),l=o.getActiveAudioIndex();e.forEach(a=>{let s=a.getAttribute("data-amplitude-audio-index");l==s?a.innerHTML=c(this,T).hours:a.innerHTML="00"})},Cn=new WeakSet,yu=function(){let e=document.querySelectorAll(Ie.audioMinutesTimeElementQuery),l=o.getActiveAudioIndex();e.forEach(a=>{let s=a.getAttribute("data-amplitude-audio-index");l==s?a.innerHTML=c(this,T).minutes:a.innerHTML="00"})},_n=new WeakSet,vu=function(){let e=document.querySelectorAll(Ie.audioSecondsTimeElementQuery),l=o.getActiveAudioIndex();e.forEach(a=>{let s=a.getAttribute("data-amplitude-audio-index");l==s?a.innerHTML=c(this,T).seconds:a.innerHTML="00"})},r(Q,"audioFormattedTimeElementQuery",".amplitude-current-time[data-amplitude-audio-index]:not([data-amplitude-collection-key])"),r(Q,"audioHoursTimeElementQuery",".amplitude-current-hours[data-amplitude-audio-index]:not([data-amplitude-collection-key])"),r(Q,"audioMinutesTimeElementQuery",".amplitude-current-minutes[data-amplitude-audio-index]:not([data-amplitude-collection-key])"),r(Q,"audioSecondsTimeElementQuery",".amplitude-current-seconds[data-amplitude-audio-index]:not([data-amplitude-collection-key])");const Se=class{constructor(e){i(this,Pn);i(this,Qn);i(this,zn);i(this,Un);i(this,w,void 0);u(this,w,e)}sync(){t(this,Pn,gu).call(this),t(this,Qn,Eu).call(this),t(this,zn,Au).call(this),t(this,Un,bu).call(this)}};let z=Se;w=new WeakMap,Pn=new WeakSet,gu=function(){let e=o.getTimeFormat(),l=o.getActiveCollection(),a=o.getActiveAudioIndex(),s=document.querySelectorAll(Se.collectionAudioFormattedTimeElementQuery),d=e.replace("HH",c(this,w).hours).replace("MM",c(this,w).minutes).replace("SS",c(this,w).seconds);s.forEach(f=>{let fe=f.getAttribute("data-amplitude-collection-key"),rs=f.getAttribute("data-amplitude-audio-index");l==fe&&a==rs?f.innerHTML=d:f.innerHTML="00:00"})},Qn=new WeakSet,Eu=function(){let e=document.querySelectorAll(Se.collectionAudioHoursTimeElementQuery),l=o.getActiveCollection(),a=o.getActiveAudioIndex();e.forEach(s=>{let d=s.getAttribute("data-amplitude-collection-key"),f=s.getAttribute("data-amplitude-audio-index");l==d&&a==f?s.innerHTML=c(this,w).hours:s.innerHTML="00"})},zn=new WeakSet,Au=function(){let e=document.querySelectorAll(Se.collectionAudioMinutesTimeElementQuery),l=o.getActiveCollection(),a=o.getActiveAudioIndex();e.forEach(s=>{let d=s.getAttribute("data-amplitude-collection-key"),f=s.getAttribute("data-amplitude-audio-index");l==d&&a==f?s.innerHTML=c(this,w).minutes:s.innerHTML="00"})},Un=new WeakSet,bu=function(){let e=document.querySelectorAll(Se.collectionAudioSecondsTimeElementQuery),l=o.getActiveCollection(),a=o.getActiveAudioIndex();e.forEach(s=>{let d=s.getAttribute("data-amplitude-collection-key"),f=s.getAttribute("data-amplitude-audio-index");l==d&&a==f?s.innerHTML=c(this,w).seconds:s.innerHTML="00"})},r(z,"collectionAudioFormattedTimeElementQuery",".amplitude-current-time[data-amplitude-collection-key][data-amplitude-audio-index]"),r(z,"collectionAudioHoursTimeElementQuery",".amplitude-current-hours[data-amplitude-collection-key][data-amplitude-audio-index]"),r(z,"collectionAudioMinutesTimeElementQuery",".amplitude-current-minutes[data-amplitude-collection-key][data-amplitude-audio-index]"),r(z,"collectionAudioSecondsTimeElementQuery",".amplitude-current-seconds[data-amplitude-collection-key][data-amplitude-audio-index]");class Wr{syncCurrentTime(e){new _(e).sync(),new P(e).sync(),new Q(e).sync(),new z(e).sync()}syncDurationTime(){}resetDurationTime(){}}const Dn=class{constructor(){i(this,qn);i(this,Nn);i(this,j);i(this,at,void 0);i(this,ot,void 0);u(this,ot,o.isIE())}initialize(){t(this,qn,ku).call(this),t(this,Nn,xu).call(this)}static syncUI(e){document.querySelectorAll(Dn.globalTrackerQuery).forEach(a=>{a.value=e})}};let _e=Dn;at=new WeakMap,ot=new WeakMap,qn=new WeakSet,ku=function(){u(this,at,document.querySelectorAll(Dn.globalTrackerQuery))},Nn=new WeakSet,xu=function(){c(this,at).forEach(e=>{c(this,ot)?(e.removeEventListener("change",t(this,j,ri)),e.addEventListener("change",t(this,j,ri).bind(this,e))):(e.removeEventListener("input",t(this,j,ri)),e.addEventListener("input",t(this,j,ri).bind(this,e)))})},j=new WeakSet,ri=function(e){if(!o.isLive()){let l=e.value,a=Ce.percentageInSeconds(l);new p().setCurrentTime(a)}},r(_e,"globalTrackerQuery",'input[type="range"].amplitude-audio-tracker:not([data-amplitude-audio-index]):not([data-amplitude-collection-key])');const Fn=class{constructor(){i(this,Hn);i(this,Vn);i(this,O);i(this,st,void 0);i(this,ct,void 0);u(this,ct,o.isIE())}initialize(){t(this,Hn,Lu).call(this),t(this,Vn,Iu).call(this)}static syncUI(e){let l=document.querySelectorAll(Fn.collectionTrackerQuery),a=o.getActiveCollection();l.forEach(s=>{let d=s.getAttribute("data-amplitude-collection-key");a==d?s.value=e:s.value=0})}};let Pe=Fn;st=new WeakMap,ct=new WeakMap,Hn=new WeakSet,Lu=function(){u(this,st,document.querySelectorAll(Fn.collectionTrackerQuery))},Vn=new WeakSet,Iu=function(){c(this,st).forEach(e=>{c(this,ct)?(e.removeEventListener("change",t(this,O,hi)),e.addEventListener("change",t(this,O,hi).bind(this,e))):(e.removeEventListener("input",t(this,O,hi)),e.addEventListener("input",t(this,O,hi).bind(this,e)))})},O=new WeakSet,hi=function(e){if(!o.isLive()){let l=o.getActiveCollection(),a=e.getAttribute("data-amplitude-collection-key");if(l==a){let s=e.value,d=Ce.percentageInSeconds(s);new p().setCurrentTime(d)}}},r(Pe,"collectionTrackerQuery",'input[type="range"].amplitude-audio-tracker[data-amplitude-collection-key]:not([data-amplitude-audio-index])');const Bn=class{constructor(){i(this,jn);i(this,On);i(this,B);i(this,ut,void 0);i(this,dt,void 0);u(this,dt,o.isIE())}initialize(){t(this,jn,Su).call(this),t(this,On,Tu).call(this)}static syncUI(e){let l=document.querySelectorAll(Bn.audioTrackerQuery),a=o.getActiveAudioIndex();l.forEach(s=>{let d=s.getAttribute("data-amplitude-audio-index");a==d?s.value=e:s.value=0})}};let Qe=Bn;ut=new WeakMap,dt=new WeakMap,jn=new WeakSet,Su=function(){u(this,ut,document.querySelectorAll(Bn.audioTrackerQuery))},On=new WeakSet,Tu=function(){c(this,ut).forEach(e=>{c(this,dt)?(e.removeEventListener("change",t(this,B,mi)),e.addEventListener("change",t(this,B,mi).bind(this,e))):(e.removeEventListener("input",t(this,B,mi)),e.addEventListener("input",t(this,B,mi).bind(this,e)))})},B=new WeakSet,mi=function(e){if(!o.isLive()){let l=o.getActiveAudioIndex(),a=e.getAttribute("data-amplitude-audio-index");if(l==a){let s=e.value,d=Ce.percentageInSeconds(s);new p().setCurrentTime(d)}}},r(Qe,"audioTrackerQuery",'input[type="range"].amplitude-audio-tracker[data-amplitude-audio-index]:not([data-amplitude-collection-key])');const Rn=class{constructor(){i(this,Kn);i(this,Yn);i(this,K);i(this,rt,void 0);i(this,ht,void 0);u(this,ht,o.isIE())}initialize(){t(this,Kn,wu).call(this),t(this,Yn,Mu).call(this)}static syncUI(e){let l=document.querySelectorAll(Rn.collectionAudioTrackerQuery),a=o.getActiveCollection(),s=o.getActiveAudioIndex();l.forEach(d=>{let f=d.getAttribute("data-amplitude-collection-key"),fe=d.getAttribute("data-amplitude-audio-index");a==f&&s==fe?d.value=e:d.value=0})}};let ze=Rn;rt=new WeakMap,ht=new WeakMap,Kn=new WeakSet,wu=function(){u(this,rt,document.querySelectorAll(Rn.collectionAudioTrackerQuery))},Yn=new WeakSet,Mu=function(){c(this,rt).forEach(e=>{c(this,ht)?(e.removeEventListener("change",t(this,K,pi)),e.addEventListener("change",t(this,K,pi).bind(this,e))):(e.removeEventListener("input",t(this,K,pi)),e.addEventListener("input",t(this,K,pi).bind(this,e)))})},K=new WeakSet,pi=function(e){if(!o.isLive()){let l=o.getActiveCollection(),a=e.getAttribute("data-amplitude-collection-key"),s=o.getActiveAudioIndex(),d=e.getAttribute("data-amplitude-audio-index");if(l==a&&s==d){let f=e.value,fe=Ce.percentageInSeconds(f);new p().setCurrentTime(fe)}}},r(ze,"collectionAudioTrackerQuery",'input[type="range"].amplitude-audio-tracker[data-amplitude-collection-key][data-amplitude-audio-index]');class Js{constructor(){i(this,$n);i(this,Wn);i(this,Jn);i(this,Xn)}setUp(){t(this,$n,Cu).call(this),t(this,Wn,_u).call(this),t(this,Jn,Pu).call(this),t(this,Xn,Qu).call(this)}static syncCurrentTime(e){_e.syncUI(e),Pe.syncUI(e),Qe.syncUI(e),ze.syncUI(e)}}$n=new WeakSet,Cu=function(){new _e().initialize()},Wn=new WeakSet,_u=function(){new Pe().initialize()},Jn=new WeakSet,Pu=function(){new Qe().initialize()},Xn=new WeakSet,Qu=function(){new ze().initialize()};class Jr{constructor(){i(this,Zn);i(this,Gn);i(this,Y);i(this,ea);i(this,ta)}bind(){t(this,Zn,zu).call(this),t(this,Gn,Uu).call(this)}}Zn=new WeakSet,zu=function(){n.audio_element.removeEventListener("timeupdate",t(this,Y,fi).bind(this)),n.audio_element.addEventListener("timeupdate",t(this,Y,fi).bind(this))},Gn=new WeakSet,Uu=function(){n.audio_element.removeEventListener("durationchange",t(this,Y,fi).bind(this)),n.audio_element.addEventListener("durationchange",t(this,Y,fi).bind(this))},Y=new WeakSet,fi=function(){o.updateBufferedTime(),Rr.syncAll(),t(this,ea,qu).call(this),t(this,ta,Nu).call(this)},ea=new WeakSet,qu=function(){if(!o.isLive()){let e=new Ce,l=e.computeCurrentTimes(),a=e.computeAudioCompletionPercentage(),s=e.computeAudioDuration(),d=new Wr;d.syncCurrentTime(l),d.syncDurationTime(l,s),Js.syncCurrentTime(a),$r.syncCurrentTime(a)}},ta=new WeakSet,Nu=function(){};class Xr{constructor(){i(this,ia);i(this,la);i(this,na);i(this,aa);i(this,bs);i(this,oa)}initializeAllEvents(){g.writeMessage("Starting initialization of event handlers..."),t(this,ia,Du).call(this),t(this,la,Hu).call(this),t(this,na,Vu).call(this),t(this,aa,Fu).call(this),t(this,oa,ju).call(this)}}ia=new WeakSet,Du=function(){document.addEventListener("touchmove",()=>{n.is_touch_moving=!0}),document.addEventListener("touchend",()=>{n.is_touch_moving||(n.is_touch_moving=!1)})},la=new WeakSet,Hu=function(){new Jr().bind()},na=new WeakSet,Vu=function(){new Kr().bind()},aa=new WeakSet,Fu=function(){new Br().bind()},bs=new WeakSet,Eh=function(){new ProgressEvent().bind()},oa=new WeakSet,ju=function(){};const ks=class{constructor(){i(this,sa);i(this,ca);i(this,R);i(this,mt,void 0);i(this,pt,void 0);u(this,pt,o.isMobile())}initialize(){t(this,sa,Ou).call(this),t(this,ca,Bu).call(this)}};let Ki=ks;mt=new WeakMap,pt=new WeakMap,sa=new WeakSet,Ou=function(){u(this,mt,document.querySelectorAll(ks.collectionNextQuery))},ca=new WeakSet,Bu=function(){c(this,mt).forEach(e=>{c(this,pt)?(e.removeEventListener("touchend",t(this,R,yi)),e.addEventListener("touchend",t(this,R,yi))):(e.removeEventListener("click",t(this,R,yi)),e.addEventListener("click",t(this,R,yi)))})},R=new WeakSet,yi=function(){let e=this.getAttribute("data-amplitude-collection-key");e==n.active_collection?new A().next(e):g.writeMessage("You can not go to the next audio on a playlist that is not being played!")},r(Ki,"collectionNextQuery",".amplitude-next[data-amplitude-collection-key]");const xs=class{constructor(){i(this,ua);i(this,da);i(this,$);i(this,ft,void 0);i(this,yt,void 0);u(this,yt,o.isMobile())}initialize(){t(this,ua,Ku).call(this),t(this,da,Yu).call(this)}};let Yi=xs;ft=new WeakMap,yt=new WeakMap,ua=new WeakSet,Ku=function(){u(this,ft,document.querySelectorAll(xs.globalNextQuery))},da=new WeakSet,Yu=function(){c(this,ft).forEach(e=>{c(this,yt)?(e.removeEventListener("touchend",t(this,$,vi)),e.addEventListener("touchend",t(this,$,vi))):(e.removeEventListener("click",t(this,$,vi)),e.addEventListener("click",t(this,$,vi)))})},$=new WeakSet,vi=function(){o.getScope()=="collection"?new A().next():g.writeMessage("You can only navigate next when you are playing a collection.")},r(Yi,"globalNextQuery",".amplitude-next:not([data-amplitude-collection-key])");class Zr{constructor(){i(this,ra);i(this,ha)}setUp(){t(this,ra,Ru).call(this),t(this,ha,$u).call(this)}}ra=new WeakSet,Ru=function(){new Yi().initialize()},ha=new WeakSet,$u=function(){new Ki().initialize()};const Et=class{constructor(){i(this,ma);i(this,pa);i(this,W);i(this,vt,void 0);i(this,gt,void 0);u(this,gt,o.isIE())}setUp(){t(this,ma,Wu).call(this),t(this,pa,Ju).call(this)}static syncElements(){document.querySelectorAll(Et.volumeSliderElementQuery).forEach(function(l){l.value=o.getVolume()})}};let U=Et;vt=new WeakMap,gt=new WeakMap,ma=new WeakSet,Wu=function(){u(this,vt,document.querySelectorAll(Et.volumeSliderElementQuery))},pa=new WeakSet,Ju=function(){o.isIos()?Debug.writeMessage("iOS does NOT allow volume to be set through javascript: https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4"):c(this,vt).forEach(e=>{c(this,gt)?(e.removeEventListener("change",t(this,W,gi)),e.addEventListener("change",t(this,W,gi))):(e.removeEventListener("input",t(this,W,gi)),e.addEventListener("input",t(this,W,gi)))})},W=new WeakSet,gi=function(){new p().setVolume(this.value),M.syncElements(),Et.syncElements()},r(U,"volumeSliderElementQuery",'input[type="range"].amplitude-volume-slider');const kt=class{constructor(){i(this,fa);i(this,ya);i(this,J);i(this,At,void 0);i(this,bt,void 0);u(this,bt,o.isMobile())}setUp(){t(this,fa,Xu).call(this),t(this,ya,Zu).call(this)}static syncElements(){document.querySelectorAll(kt.muteElementQuery).forEach(function(l){o.getVolume()==0?(l.classList.remove("amplitude-not-muted"),l.classList.add("amplitude-muted")):(l.classList.add("amplitude-not-muted"),l.classList.remove("amplitude-muted"))})}};let M=kt;At=new WeakMap,bt=new WeakMap,fa=new WeakSet,Xu=function(){u(this,At,document.querySelectorAll(kt.muteElementQuery))},ya=new WeakSet,Zu=function(){o.isIos()?g.writeMessage("iOS does NOT allow volume to be set through javascript: https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4"):c(this,At).forEach(e=>{c(this,bt)?(e.removeEventListener("touchend",t(this,J,Ei)),e.addEventListener("touchend",t(this,J,Ei))):(e.removeEventListener("click",t(this,J,Ei)),e.addEventListener("click",t(this,J,Ei)))})},J=new WeakSet,Ei=function(){if(!o.isTouchMoving()){let e=new p;o.getVolume()==0?e.setVolume(o.getPreMuteVolume()):(o.setPreMuteVolume(),e.setVolume(0)),kt.syncElements(),U.syncElements()}},r(M,"muteElementQuery",".amplitude-mute");const Ls=class{constructor(){i(this,va);i(this,ga);i(this,X);i(this,xt,void 0);i(this,Lt,void 0);u(this,Lt,o.isMobile())}initialize(){t(this,va,Gu).call(this),t(this,ga,ed).call(this)}};let Ri=Ls;xt=new WeakMap,Lt=new WeakMap,va=new WeakSet,Gu=function(){u(this,xt,document.querySelectorAll(Ls.globalPauseQuery))},ga=new WeakSet,ed=function(){c(this,xt).forEach(e=>{c(this,Lt)?(e.removeEventListener("touchend",t(this,X,Ai)),e.addEventListener("touchend",t(this,X,Ai))):(e.removeEventListener("click",t(this,X,Ai)),e.addEventListener("click",t(this,X,Ai)))})},X=new WeakSet,Ai=function(){o.isTouchMoving()||(new p().pause(),m.syncAll())},r(Ri,"globalPauseQuery",".amplitude-pause:not([data-amplitude-audio-index]):not([data-amplitude-collection-key])");const Is=class{constructor(){i(this,Ea);i(this,Aa);i(this,Z);i(this,It,void 0);i(this,St,void 0);u(this,St,o.isMobile())}initialize(){t(this,Ea,td).call(this),t(this,Aa,id).call(this)}};let $i=Is;It=new WeakMap,St=new WeakMap,Ea=new WeakSet,td=function(){u(this,It,document.querySelectorAll(Is.collectionPauseQuery))},Aa=new WeakSet,id=function(){c(this,It).forEach(e=>{c(this,St)?(e.removeEventListener("touchend",t(this,Z,bi)),e.addEventListener("touchend",t(this,Z,bi))):(e.removeEventListener("click",t(this,Z,bi)),e.addEventListener("click",t(this,Z,bi)))})},Z=new WeakSet,bi=function(){if(!o.isTouchMoving()){let e=this.getAttribute("data-amplitude-collection-key");config.active_collection==e&&(new p().pause(),m.syncAll())}},r($i,"collectionPauseQuery",".amplitude-pause[data-amplitude-collection-key]:not([data-amplitude-audio-index])");const Ss=class{constructor(){i(this,ba);i(this,ka);i(this,G);i(this,Tt,void 0);i(this,wt,void 0);u(this,wt,o.isMobile())}initialize(){t(this,ba,ld).call(this),t(this,ka,nd).call(this)}};let Wi=Ss;Tt=new WeakMap,wt=new WeakMap,ba=new WeakSet,ld=function(){u(this,Tt,document.querySelectorAll(Ss.audioPauseQuery))},ka=new WeakSet,nd=function(){c(this,Tt).forEach(e=>{c(this,wt)?(e.removeEventListener("touchend",t(this,G,ki)),e.addEventListener("touchend",t(this,G,ki))):(e.removeEventListener("click",t(this,G,ki)),e.addEventListener("click",t(this,G,ki)))})},G=new WeakSet,ki=function(){if(!o.isTouchMoving()){let e=this.getAttribute("data-amplitude-audio-index");o.getScope()=="audio"&&n.active_index==e&&(new p().pause(),m.syncAll())}},r(Wi,"audioPauseQuery",".amplitude-pause[data-amplitude-audio-index]:not([data-amplitude-collection-key])");const Ts=class{constructor(){i(this,xa);i(this,La);i(this,ee);i(this,Mt,void 0);i(this,Ct,void 0);u(this,Ct,o.isMobile())}initialize(){t(this,xa,ad).call(this),t(this,La,od).call(this)}};let Ji=Ts;Mt=new WeakMap,Ct=new WeakMap,xa=new WeakSet,ad=function(){u(this,Mt,document.querySelectorAll(Ts.collectionAudioPauseQuery))},La=new WeakSet,od=function(){c(this,Mt).forEach(e=>{c(this,Ct)?(e.removeEventListener("touchend",t(this,ee,xi)),e.addEventListener("touchend",t(this,ee,xi).bind(this,e))):(e.removeEventListener("click",t(this,ee,xi)),e.addEventListener("click",t(this,ee,xi).bind(this,e)))})},ee=new WeakSet,xi=function(){if(!o.isTouchMoving()){let e=element.getAttribute("data-amplitude-collection-key"),l=element.getAttribute("data-amplitude-audio-index");n.active_collection==e&&n.collections[e].active_index==l&&(new p().pause(),m.syncAll())}},r(Ji,"collectionAudioPauseQuery",".amplitude-pause[data-amplitude-collection-key][data-amplitude-audio-index]");class Gr{constructor(){i(this,Ia);i(this,Sa);i(this,Ta);i(this,wa)}setUp(){t(this,Ia,sd).call(this),t(this,Sa,cd).call(this),t(this,Ta,ud).call(this),t(this,wa,dd).call(this)}}Ia=new WeakSet,sd=function(){new Ri().initialize()},Sa=new WeakSet,cd=function(){new $i().initialize()},Ta=new WeakSet,ud=function(){new Wi().initialize()},wa=new WeakSet,dd=function(){new Ji().initialize()};const ws=class{constructor(){i(this,Ma);i(this,Ca);i(this,te);i(this,_t,void 0);i(this,Pt,void 0);u(this,Pt,o.isMobile())}initialize(){t(this,Ma,rd).call(this),t(this,Ca,hd).call(this)}};let Xi=ws;_t=new WeakMap,Pt=new WeakMap,Ma=new WeakSet,rd=function(){u(this,_t,document.querySelectorAll(ws.globalPlayQuery))},Ca=new WeakSet,hd=function(){c(this,_t).forEach(e=>{c(this,Pt)?(e.removeEventListener("touchend",t(this,te,Li)),e.addEventListener("touchend",t(this,te,Li))):(e.removeEventListener("click",t(this,te,Li)),e.addEventListener("click",t(this,te,Li)))})},te=new WeakSet,Li=function(){new p().play(),m.syncAll()},r(Xi,"globalPlayQuery",".amplitude-play:not([data-amplitude-audio-index]):not([data-amplitude-collection-index])");const Ms=class{constructor(){i(this,_a);i(this,Pa);i(this,ie);i(this,Qa);i(this,za);i(this,Qt,void 0);i(this,zt,void 0);u(this,zt,o.isMobile())}initialize(){t(this,_a,md).call(this),t(this,Pa,pd).call(this)}};let Zi=Ms;Qt=new WeakMap,zt=new WeakMap,_a=new WeakSet,md=function(){u(this,Qt,document.querySelectorAll(Ms.collectionPlayQuery))},Pa=new WeakSet,pd=function(){c(this,Qt).forEach(e=>{c(this,zt)?(e.removeEventListener("touchend",t(this,ie,Ii)),e.addEventListener("touchend",t(this,ie,Ii))):(e.removeEventListener("click",t(this,ie,Ii)),e.addEventListener("click",t(this,ie,Ii)))})},ie=new WeakSet,Ii=function(){if(!o.isTouchMoving()){let e=this.getAttribute("data-amplitude-collection-key");if(!k.collectionExists(e))return g.writeMessage('Collection with key "'+e+'" does not exist! Please define this collection in your configuration.'),!1;t(this,Qa,fd).call(this,e),t(this,za,yd).call(this),m.syncAll()}},Qa=new WeakSet,fd=function(e){if(k.collectionChanged(e)){let l=new A;l.setActiveCollection(e),k.isCollectionShuffled(e)?l.changeAudioCollection(e,n.collections[e].shuffle_list[0],0,!0):l.changeAudioCollection(e,n.collections[e].audio[0],0)}},za=new WeakSet,yd=function(){new p().play()},r(Zi,"collectionPlayQuery",".amplitude-play[data-amplitude-collection-key]:not([data-amplitude-audio-index])");const Cs=class{constructor(){i(this,Ua);i(this,qa);i(this,le);i(this,Na);i(this,Da);i(this,Ha);i(this,Ut,void 0);i(this,qt,void 0);u(this,qt,o.isMobile())}initialize(){t(this,Ua,vd).call(this),t(this,qa,gd).call(this)}};let Gi=Cs;Ut=new WeakMap,qt=new WeakMap,Ua=new WeakSet,vd=function(){u(this,Ut,document.querySelectorAll(Cs.audioPlayQuery))},qa=new WeakSet,gd=function(){c(this,Ut).forEach(e=>{c(this,qt)?(e.removeEventListener("touchend",t(this,le,Si)),e.addEventListener("touchend",t(this,le,Si).bind(this,e))):(e.removeEventListener("click",t(this,le,Si)),e.addEventListener("click",t(this,le,Si).bind(this,e)))})},le=new WeakSet,Si=function(e){if(!o.isTouchMoving()){let l=e.getAttribute("data-amplitude-audio-index");if(!ge.audioExists(l))return g.writeMessage('Audio with index "'+l+'" does not exist! Please add an audio object at this index in your configuration.'),!1;t(this,Na,Ed).call(this,l),t(this,Da,Ad).call(this,l),t(this,Ha,bd).call(this),m.syncAll()}},Na=new WeakSet,Ed=function(e){if(k.collectionChanged(null)){let l=new A,a=new Ee;l.setActiveCollection(null),a.changeAudio(n.audio[e],e,!0)}},Da=new WeakSet,Ad=function(e){ge.audioChanged(e)&&new Ee().changeAudio(n.audio[e],e,!0)},Ha=new WeakSet,bd=function(){new p().play()},r(Gi,"audioPlayQuery",".amplitude-play[data-amplitude-audio-index]:not([data-amplitude-collection-key])");const _s=class{constructor(){i(this,Va);i(this,Fa);i(this,ne);i(this,ja);i(this,Oa);i(this,Ba);i(this,Nt,void 0);i(this,Dt,void 0);u(this,Dt,o.isMobile())}initialize(){t(this,Va,kd).call(this),t(this,Fa,xd).call(this)}};let el=_s;Nt=new WeakMap,Dt=new WeakMap,Va=new WeakSet,kd=function(){u(this,Nt,document.querySelectorAll(_s.collectionAudioPlayQuery))},Fa=new WeakSet,xd=function(){c(this,Nt).forEach(e=>{c(this,Dt)?(e.removeEventListener("touchend",t(this,ne,Ti)),e.addEventListener("touchend",t(this,ne,Ti))):(e.removeEventListener("click",t(this,ne,Ti)),e.addEventListener("click",t(this,ne,Ti)))})},ne=new WeakSet,Ti=function(){if(!o.isTouchMoving()){let e=this.getAttribute("data-amplitude-collection-key"),l=this.getAttribute("data-amplitude-audio-index");t(this,ja,Ld).call(this,e,l),t(this,Oa,Id).call(this,e,l),t(this,Ba,Sd).call(this),m.syncAll()}},ja=new WeakSet,Ld=function(e,l){if(k.collectionChanged(e)){let a=new A;a.setActiveCollection(e),a.changeAudioCollection(e,n.collections[e].audio[l],l,!0)}},Oa=new WeakSet,Id=function(e,l){ge.audioChanged(l,e)&&new A().changeAudioCollection(e,n.collections[e].audio[l],l,!0)},Ba=new WeakSet,Sd=function(){new p().play()},r(el,"collectionAudioPlayQuery",".amplitude-play[data-amplitude-audio-index][data-amplitude-collection-key]");class eh{constructor(){i(this,Ka);i(this,Ya);i(this,Ra);i(this,$a)}setUp(){t(this,Ka,Td).call(this),t(this,Ya,wd).call(this),t(this,Ra,Md).call(this),t(this,$a,Cd).call(this)}}Ka=new WeakSet,Td=function(){new Xi().initialize()},Ya=new WeakSet,wd=function(){new Zi().initialize()},Ra=new WeakSet,Md=function(){new Gi().initialize()},$a=new WeakSet,Cd=function(){new el().initialize()};const Ft=class{constructor(){i(this,Wa);i(this,Ja);i(this,ae);i(this,Ht,void 0);i(this,Vt,void 0);u(this,Vt,o.isMobile())}setUp(){t(this,Wa,_d).call(this),t(this,Ja,Pd).call(this)}static syncElements(){document.querySelectorAll(Ft.playbackSpeedElementQuery).forEach(function(l){switch(l.classList.remove("amplitude-playback-speed-10"),l.classList.remove("amplitude-playback-speed-15"),l.classList.remove("amplitude-playback-speed-20"),o.getPlaybackSpeed()){case 1:l.classList.add("amplitude-playback-speed-10");break;case 1.5:l.classList.add("amplitude-playback-speed-15");break;case 2:l.classList.add("amplitude-playback-speed-20");break}})}};let Ue=Ft;Ht=new WeakMap,Vt=new WeakMap,Wa=new WeakSet,_d=function(){u(this,Ht,document.querySelectorAll(Ft.playbackSpeedElementQuery))},Ja=new WeakSet,Pd=function(){c(this,Ht).forEach(e=>{c(this,Vt)?(e.removeEventListener("touchend",t(this,ae,wi)),e.addEventListener("touchend",t(this,ae,wi))):(e.removeEventListener("click",t(this,ae,wi)),e.addEventListener("click",t(this,ae,wi)))})},ae=new WeakSet,wi=function(){if(!o.isTouchMoving()){let e=new p;switch(o.getPlaybackSpeed()){case 1:e.setPlaybackSpeed(1.5);break;case 1.5:e.setPlaybackSpeed(2);break;case 2:e.setPlaybackSpeed(1);break}Ft.syncElements()}},r(Ue,"playbackSpeedElementQuery",".amplitude-playback-speed");const Ps=class{constructor(){i(this,Xa);i(this,Za);i(this,oe);i(this,jt,void 0);i(this,Ot,void 0);u(this,Ot,o.isMobile())}initialize(){t(this,Xa,Qd).call(this),t(this,Za,zd).call(this)}};let tl=Ps;jt=new WeakMap,Ot=new WeakMap,Xa=new WeakSet,Qd=function(){u(this,jt,document.querySelectorAll(Ps.collectionPreviousQuery))},Za=new WeakSet,zd=function(){c(this,jt).forEach(e=>{c(this,Ot)?(e.removeEventListener("touchend",t(this,oe,Mi)),e.addEventListener("touchend",t(this,oe,Mi))):(e.removeEventListener("click",t(this,oe,Mi)),e.addEventListener("click",t(this,oe,Mi)))})},oe=new WeakSet,Mi=function(){o.isTouchMoving()||(this.getAttribute("data-amplitude-collection-key")==config.active_collection?new A().previous():g.writeMessage("You can not go to the previous audio on a playlist that is not being played!"))},r(tl,"collectionPreviousQuery",".amplitude-previous[data-amplitude-collection-key]");const Qs=class{constructor(){i(this,Ga);i(this,eo);i(this,se);i(this,Bt,void 0);i(this,Kt,void 0);u(this,Kt,o.isMobile())}initialize(){t(this,Ga,Ud).call(this),t(this,eo,qd).call(this)}};let il=Qs;Bt=new WeakMap,Kt=new WeakMap,Ga=new WeakSet,Ud=function(){u(this,Bt,document.querySelectorAll(Qs.globalPreviousQuery))},eo=new WeakSet,qd=function(){c(this,Bt).forEach(e=>{c(this,Kt)?(e.removeEventListener("touchend",t(this,se,Ci)),e.addEventListener("touchend",t(this,se,Ci))):(e.removeEventListener("click",t(this,se,Ci)),e.addEventListener("click",t(this,se,Ci)))})},se=new WeakSet,Ci=function(){o.isTouchMoving()||(o.getScope()=="collection"?new A().previous():g.writeMessage("You can only navigate previous when you are playing a collection."))},r(il,"globalPreviousQuery",".amplitude-previous:not([data-amplitude-collection-key])");class th{constructor(){i(this,to);i(this,io)}setUp(){t(this,to,Nd).call(this),t(this,io,Dd).call(this)}}to=new WeakSet,Nd=function(){new il().initialize()},io=new WeakSet,Dd=function(){new tl().initialize()};class Xs{constructor(e){i(this,no);i(this,ao);i(this,lo,void 0);u(this,lo,e)}toggleShuffle(e){if(o.isCollectionShuffled(e))o.setCollectionShuffled(e,!1,[]);else{let a=t(this,no,Hd).call(this,e);o.setCollectionShuffled(e,!0,a)}}}lo=new WeakMap,no=new WeakSet,Hd=function(e){let l=o.getCollectionAudio(e),a=new Array(l.length);l.forEach((s,d)=>{a[d]=s[d]});for(let s=l.length-1;s>0;s--){let d=Math.floor(Math.random()*l.length+1);t(this,ao,Vd).call(this,a,s,d-1)}return a},ao=new WeakSet,Vd=function(e,l,a){let s=e[l];e[l]=e[a],e[a]=s};const co=class{constructor(){i(this,oo);i(this,so);i(this,ce);i(this,Yt,void 0);i(this,Rt,void 0);u(this,Rt,o.isMobile())}initialize(){t(this,oo,Fd).call(this),t(this,so,jd).call(this)}static syncUI(e){document.querySelectorAll('.amplitude-shuffle[data-amplitude-collection="'+e+'"]').forEach(a=>{o.isCollectionShuffled(e)?(a.classList.add("amplitude-shuffle-on"),a.classList.remove("amplitude-shuffle-off")):(a.classList.add("amplitude-shuffle-off"),a.classList.remove("amplitude-shuffle-on"))})}};let qe=co;Yt=new WeakMap,Rt=new WeakMap,oo=new WeakSet,Fd=function(){u(this,Yt,document.querySelectorAll(co.collectionShuffleQuery))},so=new WeakSet,jd=function(){c(this,Yt).forEach(e=>{c(this,Rt)?(e.removeEventListener("touchend",t(this,ce,_i)),e.addEventListener("touchend",t(this,ce,_i))):(e.removeEventListener("click",t(this,ce,_i)),e.addEventListener("click",t(this,ce,_i)))})},ce=new WeakSet,_i=function(){let e=this.getAttribute("data-amplitude-collection-key");new Xs(e).toggleShuffle(),co.syncUI(e)},r(qe,"collectionShuffleQuery",".amplitude-shuffle[data-amplitude-collection-key]");const Jt=class{constructor(){i(this,uo);i(this,ro);i(this,ue);i(this,$t,void 0);i(this,Wt,void 0);u(this,Wt,o.isMobile())}initialize(){t(this,uo,Od).call(this),t(this,ro,Bd).call(this)}static syncUI(){let e=document.querySelectorAll(Jt.globalShuffleQuery),l=o.getActiveCollection();e.forEach(a=>{o.isCollectionShuffled(l)?(a.classList.add("amplitude-shuffle-on"),a.classList.remove("amplitude-shuffle-off")):(a.classList.add("amplitude-shuffle-off"),a.classList.remove("amplitude-shuffle-on"))})}};let ll=Jt;$t=new WeakMap,Wt=new WeakMap,uo=new WeakSet,Od=function(){u(this,$t,document.querySelectorAll(Jt.globalShuffleQuery))},ro=new WeakSet,Bd=function(){c(this,$t).forEach(e=>{c(this,Wt)?(e.removeEventListener("touchend",t(this,ue,Pi)),e.addEventListener("touchend",t(this,ue,Pi))):(e.removeEventListener("click",t(this,ue,Pi)),e.addEventListener("click",t(this,ue,Pi)))})},ue=new WeakSet,Pi=function(){if(o.getScope()=="collection"){let e=o.getActiveCollection();new Xs(collectionKey).toggleShuffle(),Jt.syncUI(),qe.syncUI(e)}else g.writeMessage("You can only shuffle a collection if you are playing a collection.")},r(ll,"globalShuffleQuery",".amplitude-shuffle:not([data-amplitude-collection-key])");class ih{constructor(){i(this,ho);i(this,mo)}setUp(){t(this,ho,Kd).call(this),t(this,mo,Yd).call(this)}}ho=new WeakSet,Kd=function(){new ll().initialize()},mo=new WeakSet,Yd=function(){new qe().initialize()};const zs=class{constructor(){i(this,po);i(this,fo);i(this,de);i(this,yo);i(this,vo);i(this,go);i(this,Eo);i(this,Xt,void 0);i(this,Zt,void 0);u(this,Zt,o.isMobile())}initialize(){t(this,po,Rd).call(this),t(this,fo,$d).call(this)}};let nl=zs;Xt=new WeakMap,Zt=new WeakMap,po=new WeakSet,Rd=function(){u(this,Xt,document.querySelectorAll(zs.audioSkipToElementQuery))},fo=new WeakSet,$d=function(){c(this,Xt).forEach(e=>{c(this,Zt)?(e.removeEventListener("touchend",t(this,de,Qi)),e.addEventListener("touchend",t(this,de,Qi).bind(this,e))):(e.removeEventListener("click",t(this,de,Qi)),e.addEventListener("click",t(this,de,Qi).bind(this,e)))})},de=new WeakSet,Qi=function(e){if(!o.isTouchMoving()){let l=e.getAttribute("data-amplitude-audio-index"),a=e.getAttribute("data-amplitude-location");t(this,yo,Wd).call(this,l,a)&&(t(this,vo,Jd).call(this,l),t(this,go,Xd).call(this),m.syncAll(),t(this,Eo,Zd).call(this,a))}},yo=new WeakSet,Wd=function(e,l){return e==null?(g.writeMessage("You must add a `data-amplitude-audio-index` attribute to your `amplitude-skip-to` element."),!1):l==null?(g.writeMessage("You must add a `data-amplitude-location` attribute in seconds to your `amplitude-skip-to` element."),!1):!0},vo=new WeakSet,Jd=function(e){new Ee().changeAudio(n.audio[parseInt(e)],parseInt(e),!0)},go=new WeakSet,Xd=function(){new p().play()},Eo=new WeakSet,Zd=function(e){new p().skipToLocation(parseInt(e))},r(nl,"audioSkipToElementQuery",".amplitude-skip-to[data-amplitude-audio-index]:not([data-amplitude-collection-key])");const Us=class{constructor(){i(this,Ao);i(this,bo);i(this,re);i(this,ko);i(this,xo);i(this,Lo);i(this,Io);i(this,So);i(this,Gt,void 0);i(this,ei,void 0);u(this,ei,o.isMobile())}initialize(){t(this,Ao,Gd).call(this),t(this,bo,er).call(this)}};let al=Us;Gt=new WeakMap,ei=new WeakMap,Ao=new WeakSet,Gd=function(){u(this,Gt,document.querySelectorAll(Us.collectionAudioSkipToElementQuery))},bo=new WeakSet,er=function(){c(this,Gt).forEach(e=>{c(this,ei)?(e.removeEventListener("touchend",t(this,re,zi)),e.addEventListener("touchend",t(this,re,zi).bind(this,e))):(e.removeEventListener("click",t(this,re,zi)),e.addEventListener("click",t(this,re,zi).bind(this,e)))})},re=new WeakSet,zi=function(e){if(!o.isTouchMoving()){let l=e.getAttribute("data-amplitude-audio-index"),a=e.getAttribute("data-amplitude-collection-key"),s=e.getAttribute("data-amplitude-location");t(this,ko,tr).call(this,l,a,s)&&(t(this,xo,ir).call(this,a),t(this,Lo,lr).call(this,l,a),t(this,Io,nr).call(this),m.syncAll(),t(this,So,ar).call(this,s))}},ko=new WeakSet,tr=function(e,l,a){return e==null?(Debug.writeMessage("You must add a `data-amplitude-audio-index` attribute to your `amplitude-skip-to` element."),!1):l==null?(Debug.writeMessage("You must add a valid `data-amplitude-collection-key` attribute to your `amplitude-skip-to` element."),!1):a==null?(Debug.writeMessage("You must add a `data-amplitude-location` attribute in seconds to your `amplitude-skip-to` element."),!1):!0},xo=new WeakSet,ir=function(e){k.collectionChanged(e)&&new A().setActiveCollection(e)},Lo=new WeakSet,lr=function(e,l){new A().changeAudioCollection(l,config.collections[l].audio[parseInt(e)],parseInt(e),!0)},Io=new WeakSet,nr=function(){new p().play()},So=new WeakSet,ar=function(e){new p().skipToLocation(parseInt(e))},r(al,"collectionAudioSkipToElementQuery",".amplitude-skip-to[data-amplitude-audio-index][data-amplitude-collection-key]");class lh{constructor(){i(this,To);i(this,wo)}setUp(){t(this,To,or).call(this),t(this,wo,sr).call(this)}}To=new WeakSet,or=function(){new nl().initialize()},wo=new WeakSet,sr=function(){new al().initialize()};const qs=class{constructor(){i(this,Mo);i(this,Co);i(this,he);i(this,ti,void 0);i(this,ii,void 0);u(this,ii,o.isMobile())}setUp(){t(this,Mo,cr).call(this),t(this,Co,ur).call(this)}};let ol=qs;ti=new WeakMap,ii=new WeakMap,Mo=new WeakSet,cr=function(){u(this,ti,document.querySelectorAll(qs.stopElementQuery))},Co=new WeakSet,ur=function(){c(this,ti).forEach(e=>{c(this,ii)?(e.removeEventListener("touchend",t(this,he,Ui)),e.addEventListener("touchend",t(this,he,Ui))):(e.removeEventListener("click",t(this,he,Ui)),e.addEventListener("click",t(this,he,Ui)))})},he=new WeakSet,Ui=function(){o.isTouchMoving()||(new p().stop(),m.syncAll())},r(ol,"stopElementQuery",".amplitude-stop");const Ns=class{constructor(){i(this,_o);i(this,Po);i(this,me);i(this,Te,void 0);i(this,li,void 0);u(this,li,o.isMobile())}setUp(){t(this,_o,dr).call(this),t(this,Po,rr).call(this)}};let sl=Ns;Te=new WeakMap,li=new WeakMap,_o=new WeakSet,dr=function(){u(this,Te,document.querySelectorAll(Ns.volumeDownElementQuery))},Po=new WeakSet,rr=function(){c(this,Te).length>0&&o.isIos()?g.writeMessage("iOS does NOT allow volume to be set through javascript: https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4"):c(this,Te).forEach(e=>{c(this,li)?(e.removeEventListener("touchend",t(this,me,qi)),e.addEventListener("touchend",t(this,me,qi))):(e.removeEventListener("click",t(this,me,qi)),e.addEventListener("click",t(this,me,qi)))})},me=new WeakSet,qi=function(){if(!o.isTouchMoving()){let e=new p,l=o.getVolume(),a=o.getVolumeDecrement();l-a>0?e.setVolume(l-a):e.setVolume(0),M.syncElements(),U.syncElements()}},r(sl,"volumeDownElementQuery",".amplitude-volume-down");const Ds=class{constructor(){i(this,Qo);i(this,zo);i(this,pe);i(this,we,void 0);i(this,ni,void 0);u(this,ni,o.isMobile())}setUp(){t(this,Qo,hr).call(this),t(this,zo,mr).call(this)}};let cl=Ds;we=new WeakMap,ni=new WeakMap,Qo=new WeakSet,hr=function(){u(this,we,document.querySelectorAll(Ds.volumeUpElementQuery))},zo=new WeakSet,mr=function(){c(this,we).length>0&&o.isIos()?g.writeMessage("iOS does NOT allow volume to be set through javascript: https://developer.apple.com/library/safari/documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4"):c(this,we).forEach(e=>{c(this,ni)?(e.removeEventListener("touchend",t(this,pe,Ni)),e.addEventListener("touchend",t(this,pe,Ni))):(e.removeEventListener("click",t(this,pe,Ni)),e.addEventListener("click",t(this,pe,Ni)))})},pe=new WeakSet,Ni=function(){if(!o.isTouchMoving()){let e=new p,l=o.getVolume(),a=o.getVolumeIncrement();l+a<=100?e.setVolume(l+a):e.setVolume(100),M.syncElements(),U.syncElements()}},r(cl,"volumeUpElementQuery",".amplitude-volume-up");class nh{constructor(){i(this,Uo);i(this,qo);i(this,No);i(this,Do);i(this,Ho);i(this,Vo);i(this,Fo);i(this,jo);i(this,Oo);i(this,Bo);i(this,Ko);i(this,Yo);i(this,Ro);i(this,$o);i(this,Wo)}setVisualElementsDefaults(){}initializeElements(){t(this,Uo,pr).call(this),t(this,qo,fr).call(this),t(this,No,yr).call(this),t(this,Do,vr).call(this),t(this,Ho,gr).call(this),t(this,Vo,Er).call(this),t(this,Fo,Ar).call(this),t(this,jo,br).call(this),t(this,Oo,kr).call(this),t(this,Bo,xr).call(this),t(this,Ko,Lr).call(this),t(this,Yo,Ir).call(this),t(this,Ro,Sr).call(this),t(this,$o,Tr).call(this),t(this,Wo,wr).call(this)}}Uo=new WeakSet,pr=function(){new x().syncMetaData()},qo=new WeakSet,fr=function(){new eh().setUp()},No=new WeakSet,yr=function(){new Gr().setUp()},Do=new WeakSet,vr=function(){new m().setUp()},Ho=new WeakSet,gr=function(){new Zr().setUp()},Vo=new WeakSet,Er=function(){new th().setUp()},Fo=new WeakSet,Ar=function(){new M().setUp()},jo=new WeakSet,br=function(){new U().setUp()},Oo=new WeakSet,kr=function(){new Ue().setUp()},Bo=new WeakSet,xr=function(){new ol().setUp()},Ko=new WeakSet,Lr=function(){new sl().setUp()},Yo=new WeakSet,Ir=function(){new cl().setUp()},Ro=new WeakSet,Sr=function(){new ih().setUp()},$o=new WeakSet,Tr=function(){new lh().setUp()},Wo=new WeakSet,wr=function(){new Js().setUp()};class ah{constructor(){i(this,Jo);i(this,Xo);i(this,Zo);i(this,Go)}initializeCollections(){n.collections.length>0&&(t(this,Jo,Mr).call(this),t(this,Xo,Cr).call(this),t(this,Zo,_r).call(this),t(this,Go,Pr).call(this))}}Jo=new WeakSet,Mr=function(){},Xo=new WeakSet,Cr=function(){n.collections.forEach(e=>{e.active_index=null})},Zo=new WeakSet,_r=function(){n.collections.forEach(e=>{e.shuffle=!1,e.shuffle_list=[]})},Go=new WeakSet,Pr=function(){n.collections.forEach(e=>{e.repeat=!1}),console.log(n)};class oh{constructor(){i(this,es);i(this,ts)}copyUserSettings(e){this.setAudio(e.audio),this.setCollections(e.collections),this.setVolume(e.volume),this.setDebug(e.debug),this.setDefaultArtwork(e.default_artwork),this.setPlaybackSpeed(e.playback_speed),this.setCallbacks(e.callbacks)}setAudio(e){n.audio=e!=null?e:[],t(this,es,Qr).call(this),t(this,ts,zr).call(this)}setCollections(e){n.collections=e,new ah().initializeCollections()}setVolume(e){n.volume.current=e&&e.initial?e.initial:50,n.volume.increment=e&&e.increment?e.increment:5,n.volume.decrement=e&&e.decrement?e.decrement:5,M.syncElements()}setDebug(e){n.debug=e!=null?e:!1}setDefaultArtwork(e){n.default_artwork=e!=null?e:!1}setPlaybackSpeed(e){n.playback_speed=e!=null?e:1,Ue.syncElements()}setCallbacks(e){n.callbacks=e!=null?e:[]}}es=new WeakSet,Qr=function(){n.audio.forEach((e,l)=>{e.live==null&&(e.live=!1)})},ts=new WeakSet,zr=function(){n.audio.forEach((e,l)=>{e.index=l})};class sh{constructor(e,l){i(this,ls);i(this,ns);i(this,ai);i(this,as);i(this,os);i(this,ss);i(this,cs);i(this,us);i(this,ds);i(this,is,void 0);i(this,C,void 0);i(this,Me,void 0);i(this,Hs,!1);u(this,Me,new o),c(this,Me).setIsMobile(),u(this,C,e),u(this,is,l)}setup(){t(this,ls,Ur).call(this,c(this,C))?t(this,ns,qr).call(this):t(this,ai,Rs).call(this)}}is=new WeakMap,C=new WeakMap,Me=new WeakMap,Hs=new WeakMap,ls=new WeakSet,Ur=function(e){try{new URL(e)}catch{return g.writeMessage("AmplitudeJS must be initialized with a JSON object or a valid URL."),!1}return!0},ns=new WeakSet,qr=function(){fetch(c(this,C)).then(e=>{if(e.status!=200)throw e.status;return e.json()}).then(e=>{u(this,C,e),t(this,ai,Rs).call(this)}).catch(e=>{g.writeMessage(e)})},ai=new WeakSet,Rs=function(){t(this,as,Nr).call(this),t(this,os,Dr).call(this),t(this,cs,Vr).call(this),t(this,ss,Hr).call(this),t(this,us,Fr).call(this),t(this,ds,jr).call(this)},as=new WeakSet,Nr=function(){c(this,Me).resetConfig()},os=new WeakSet,Dr=function(){new oh().copyUserSettings(c(this,C))},ss=new WeakSet,Hr=function(){new Xr().initializeAllEvents()},cs=new WeakSet,Vr=function(){let e=new Ee;n.start_audio||e.changeAudio(n.audio[0],0)},us=new WeakSet,Fr=function(){new nh().initializeElements()},ds=new WeakSet,jr=function(){new b().handleNativeAudioElementEvents()};function ch(h={},e=null){new sh(h,e).setup()}const uh=Object.freeze(Object.defineProperty({__proto__:null,init:ch},Symbol.toStringTag,{value:"Module"}));function dh(){return n}const rh=Object.freeze(Object.defineProperty({__proto__:null,getConfig:dh},Symbol.toStringTag,{value:"Module"}));function hh(){return n.active_playlist}const mh=Object.freeze(Object.defineProperty({__proto__:null,getActivePlaylist:hh},Symbol.toStringTag,{value:"Module"})),ph=["abort","error","loadeddata","loadedmetadata","loadstart","pause","playing","play","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","canplay","canplaythrough","durationchange","ended"];function fh(h,e){ph.indexOf(h)>-1?n.audio_element.addEventListener(h,e):g.writeMessage("Invalid event listener. Please see all valid events here: https://www.w3schools.com/tags/ref_av_dom.asp")}const yh=Object.freeze(Object.defineProperty({__proto__:null,addAudioEventListener:fh},Symbol.toStringTag,{value:"Module"}));return function(){return{...uh,...rh,...mh,...yh}}()});
//# sourceMappingURL=amplitude.umd.js.map
